# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 404 –æ—à–∏–±–∫–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –≥–∞–ª–µ—Ä–µ–∏

**–î–∞—Ç–∞:** 2025-01-27  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ `/webapp/gallery` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ React Router 404

---

## ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `<base href="/webapp/" />` –≤ index.html
**–§–∞–π–ª:** `frontend/index.html`

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –î–æ–±–∞–≤–ª–µ–Ω —Ç–µ–≥ `<base href="/webapp/" />` –≤ `<head>`
- –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –≤—Å–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ò–∑–º–µ–Ω–µ–Ω –∑–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–∞ "PAZL Collab"

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```html
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <base href="/webapp/" />  <!-- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ -->
  <title>PAZL Collab</title>  <!-- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–æ -->
</head>
```

---

### 2. ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ ErrorBoundary
**–§–∞–π–ª:** `frontend/src/components/ErrorBoundary.jsx`

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ `error?.statusText === 'Not Found'`
- –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
- –ë–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```jsx
// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
if (error?.status === 404 || error?.statusText === 'Not Found') {
  statusCode = 404;
  errorMessage = '–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞';
  errorDetails = '–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≥–∞–ª–µ—Ä–µ—é.';
} else if (error?.status) {
  statusCode = error.status;
  errorMessage = `–û—à–∏–±–∫–∞ ${error.status}`;
  errorDetails = error.statusText || error.message || '';
}
```

---

### 3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω fallbackElement –≤ RouterProvider
**–§–∞–π–ª:** `frontend/src/main.jsx`

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –î–æ–±–∞–≤–ª–µ–Ω `fallbackElement={<ErrorBoundary />}` –≤ `RouterProvider`
- –≠—Ç–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ä–æ—É—Ç–µ—Ä–∞
- –ò–∑–º–µ–Ω–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤: `/` –∏–¥–µ—Ç –ø–µ—Ä–≤—ã–º

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```jsx
root.render(
  <StrictMode>
    <RouterProvider 
      router={router}
      fallbackElement={<ErrorBoundary />}  // ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ
    />
  </StrictMode>
);
```

---

### 4. ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ—Ç–¥–∞—á–∞ index.html –≤ FastAPI
**–§–∞–π–ª:** `api/main.py`

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `Content-Type`
- –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```python
return FileResponse(
    index_path,
    media_type="text/html",
    headers={
        "Cache-Control": "no-cache, no-store, must-revalidate",
        "Pragma": "no-cache",
        "Expires": "0"
    }
)
```

---

### 5. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤
**–§–∞–π–ª:** `frontend/src/main.jsx`

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –ú–∞—Ä—à—Ä—É—Ç `/` —Ç–µ–ø–µ—Ä—å –∏–¥–µ—Ç –ø–µ—Ä–≤—ã–º (–¥–æ `/gallery`)
- –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∫–æ—Ä–Ω–µ–≤–æ–π –ø—É—Ç—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- Catch-all –º–∞—Ä—à—Ä—É—Ç `*` –æ—Å—Ç–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–º

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```jsx
[
  { 
    path: "/",  // ‚úÖ –ü–µ—Ä–≤—ã–º
    element: <Gallery />,
    errorElement: <ErrorBoundary />
  },
  { 
    path: "/gallery", 
    element: <Gallery />,
    errorElement: <ErrorBoundary />
  },
  // ...
  {
    path: "*",  // ‚úÖ –ü–æ—Å–ª–µ–¥–Ω–∏–º
    element: <ErrorBoundary />
  }
]
```

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã 404:
1. ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `basename` –≤ —Ä–æ—É—Ç–µ—Ä–µ
2. ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ `<base href>` –≤ HTML
3. ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤
4. ‚ùå FastAPI –Ω–µ –æ—Ç–¥–∞–µ—Ç `index.html` –¥–ª—è –≤—Å–µ—Ö –ø—É—Ç–µ–π
5. ‚ùå ErrorBoundary –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç

### –†–µ—à–µ–Ω–∏—è:
1. ‚úÖ `basename: "/webapp"` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `<base href="/webapp/" />`
3. ‚úÖ –ü–æ—Ä—è–¥–æ–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω
4. ‚úÖ FastAPI –æ—Ç–¥–∞–µ—Ç `index.html` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
5. ‚úÖ ErrorBoundary —É–ª—É—á—à–µ–Ω –∏ –¥–æ–±–∞–≤–ª–µ–Ω –∫–∞–∫ `fallbackElement`

---

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:**
   ```bash
   cd frontend
   npm run build
   ```

2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å FastAPI —Å–µ—Ä–≤–µ—Ä
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
   - –û—Ç–∫—Ä—ã—Ç—å `/webapp/gallery` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   - –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –≥–∞–ª–µ—Ä–µ—è, –∞ –Ω–µ 404
   - –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –∫–∞—Å—Ç–æ–º–Ω—ã–π ErrorBoundary

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å

**–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `<base href="/webapp/" />` –≤ HTML
- ‚úÖ –£–ª—É—á—à–µ–Ω ErrorBoundary
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `fallbackElement` –≤ RouterProvider
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ—Ç–¥–∞—á–∞ `index.html` –≤ FastAPI
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤

**–ì–∞–ª–µ—Ä–µ—è –¥–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ 404!** üöÄ

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2025-01-27  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã


