# üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ä–æ—É—Ç–∏–Ω–≥–æ–º –≤ Telegram Mini App

**–î–∞—Ç–∞:** 2025-01-27  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –≤—Å–µ –µ—â–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ 404 React Router

---

## üîç –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã

### 1. –ü—Ä–æ–±–ª–µ–º–∞ —Å basename
–ï—Å–ª–∏ `basename` –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–º URL, React Router –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ –º–∞—Ä—à—Ä—É—Ç.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- URL –≤ Telegram: `{WEBAPP_URL}/webapp/gallery`
- basename –≤ —Ä–æ—É—Ç–µ—Ä–µ: `/webapp`
- base –≤ vite.config.js: `/webapp/`
- base href –≤ index.html: `/webapp/`

### 2. –ü—Ä–æ–±–ª–µ–º–∞ —Å —Å–æ–±—Ä–∞–Ω–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
–ï—Å–ª–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π, —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd frontend
npm run build
```

### 3. –ü—Ä–æ–±–ª–µ–º–∞ —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
–ë—Ä–∞—É–∑–µ—Ä –∏–ª–∏ Telegram –º–æ–∂–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é.

**–†–µ—à–µ–Ω–∏–µ:**
- –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ —Ä–µ–∂–∏–º
- –î–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é –∫ URL (–Ω–∞–ø—Ä–∏–º–µ—Ä, `?v=2`)

### 4. –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—É—Ç—è–º–∏ –≤ —Å–æ–±—Ä–∞–Ω–Ω–æ–º index.html
Vite –º–æ–∂–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø—É—Ç–∏ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –û—Ç–∫—Ä—ã—Ç—å `frontend/dist/index.html`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—É—Ç–∏ –∫ JS/CSS —Ñ–∞–π–ª–∞–º
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–Ω–∏ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å `/webapp/assets/`

---

## ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ main.jsx
- –î–æ–±–∞–≤–ª–µ–Ω try-catch –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–µ
- –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è ErrorBoundary

### 2. ‚úÖ –£–ª—É—á—à–µ–Ω ErrorBoundary
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞—è, –∫–æ–≥–¥–∞ —Ä–æ—É—Ç–µ—Ä –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
- Fallback –Ω–∞ `window.location.href` –µ—Å–ª–∏ `navigate` –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### 3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ index.html
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø—É—Ç–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ base href
- –ü–æ–º–æ–∂–µ—Ç –ø–æ–Ω—è—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

---

## üìã –®–∞–≥–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω:**
   ```bash
   cd frontend
   npm run build
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–±—Ä–∞–Ω–Ω—ã–π index.html:**
   ```bash
   cat frontend/dist/index.html
   ```
   –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—É—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ.

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏:**
   - –û—Ç–∫—Ä—ã—Ç—å DevTools –≤ Telegram (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∏–∑ index.html
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—à–∏–±–∫–∏ JavaScript

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å URL:**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ URL –≤ Telegram –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
   - –§–æ—Ä–º–∞—Ç: `{WEBAPP_URL}/webapp/gallery`
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `WEBAPP_URL` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤ `.env`

5. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞:**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ FastAPI –æ—Ç–¥–∞–µ—Ç `index.html`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Content-Type: `text/html`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ basename
–ï—Å–ª–∏ URL –≤ Telegram: `https://example.com/webapp/gallery`
- React Router –¥–æ–ª–∂–µ–Ω –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø—É—Ç—å `/gallery` (–ø–æ—Å–ª–µ basename `/webapp`)
- –ï—Å–ª–∏ basename –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π, —Ä–æ—É—Ç–µ—Ä –Ω–µ –Ω–∞–π–¥–µ—Ç –º–∞—Ä—à—Ä—É—Ç

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—É—Ç–µ–π –≤ —Å–æ–±—Ä–∞–Ω–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
Vite –¥–æ–ª–∂–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å `base: "/webapp/"`:
- –í—Å–µ –ø—É—Ç–∏ –≤ HTML –¥–æ–ª–∂–Ω—ã –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `/webapp/`
- –í—Å–µ –ø—É—Ç–∏ –≤ JS –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∏–ª–∏ –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `/webapp/`

---

## üö® –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞:**
   - –û—Ç–∫—Ä—ã—Ç—å DevTools
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—à–∏–±–∫–∏ JavaScript
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞:**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏—Ö–æ–¥—è—Ç
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `index.html` –æ—Ç–¥–∞–µ—Ç—Å—è

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `WEBAPP_URL` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è HTTPS

4. **–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø:**
   - –û—Ç–∫—Ä—ã—Ç—å URL –Ω–∞–ø—Ä—è–º—É—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   - –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –Ω–æ –Ω–µ –≤ Telegram - –ø—Ä–æ–±–ª–µ–º–∞ —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –∏–ª–∏ CSP

---

**–î–∞—Ç–∞:** 2025-01-27  
**–°—Ç–∞—Ç—É—Å:** üîç –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞


